(function(){function a(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this));this.overlay&&this.overlay.addEventListener("click",this.close.bind(this));document.getElementById("bch-open").addEventListener("click",function(){this.innerHTML="<span>Opening Bitcoin Cash Wallet</span>"})}this.Modal=function(a){this.overlay=this.modal=this.closeButton=null;var b=document.createElement("div");this.transitionEnd=b.style.WebkitTransition?"webkitTransitionEnd":b.style.OTransition?
"oTransitionEnd":"transitionend";b={autoOpen:!1,className:"fade-and-drop",content:"",maxWidth:270,minWidth:264,overlay:!0};if(a&&"object"===typeof a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);this.options=b}!0===this.options.autoOpen&&this.open()};Modal.prototype.close=function(){stopListenForTX();var a=this;this.modal.className=this.modal.className.replace(" paybutton-open","");this.overlay.className=this.overlay.className.replace(" paybutton-open","");this.modal.addEventListener(this.transitionEnd,
function(){a.modal.parentNode.removeChild(a.modal)});this.overlay.addEventListener(this.transitionEnd,function(){a.overlay.parentNode&&a.overlay.parentNode.removeChild(a.overlay)})};Modal.prototype.open=function(){var b="string"===typeof this.options.content?this.options.content:this.options.content.innerHTML;var d=document.createDocumentFragment();this.modal=document.createElement("div");this.modal.className="paybutton-modal "+this.options.className;!0===this.options.overlay&&(this.overlay=document.createElement("div"),
this.overlay.className="paybutton-overlay "+this.options.className,d.appendChild(this.overlay));var c=document.createElement("div");c.className="paybutton-content";c.id="modal-content";c.innerHTML=b;this.modal.appendChild(c);d.appendChild(this.modal);document.body.appendChild(d);a.call(this);window.getComputedStyle(this.modal).height;this.modal.className+=this.modal.offsetHeight>window.innerHeight?" paybutton-open paybutton-anchored":" paybutton-open";this.overlay.className+=" paybutton-open"}})();
function copyBCHURI(a){var b=document.createElement("input");b.value=a;document.body.appendChild(b);b.select();document.execCommand("copy",!1);b.remove();document.getElementById("copyDiv").innerHTML="<span>Address Copied!</span>"}function playAudio(){var a=new Audio("https://paybutton.cash/pre-release/v0.1/audio/pbding.mp3");a.volume=.02;a.play()}function getRandomSat(){return(Math.random()*(1.23E-6-1E-7)+1E-7).toFixed(8)}var txListen;
function startListenForTX(a){a.timeStamp=Math.floor(Date.now()/1E3);txListen=setInterval(function(){listenForTX(a)},1400)}function stopListenForTX(){clearInterval(txListen)}
function txDialogue(a){playAudio();a.successMsg||(a.successMsg="Transaction Successful!");document.getElementById("modal-content").innerHTML='<div><div><div class="txdialoguediv"><div><span>'+a.successMsg+'</span></div></div><div class="txdialoguediv"><div><span>View: </span><a href="https://explorer.bitcoin.com/bch/tx/'+a.txid+'" target="_blank" style="color: orangeRed; text-decoration: none;">Transaction</a></div></div></div></div>';console.log("Confirmed. Transaction ID:",a.txid);var b=document.getElementsByClassName(a.paywallField);
if(b)for(var d=0;d<b.length;d++)b[d].style.display="block";if(a.successCallback&&window[a.successCallback])window[a.successCallback](a.txid)}
function listenForTX(a){var b=new XMLHttpRequest;b.open("GET","https://rest.bitcoin.com/v2/address/unconfirmed/"+a.toAddress,!0);b.onload=function(){if(4==b.readyState&&200==b.status){console.log("listening for transaction..");for(var d=JSON.parse(b.responseText),c=0;c<d.utxos.length;c++){var e=d.utxos[c];if(a.timeStamp<e.ts&&e.amount==a.bchAmount){stopListenForTX();a.txid=e.txid;txDialogue(a);break}}}else console.log("Found Server But There Is An Error")};b.onerror=function(){console.log("Could Not Connect To Server")};
b.send()}
function sendToBadger(a,b,d,c,e){b*=1E8;"undefined"!==typeof web4bch?(web4bch=new Web4Bch(web4bch.currentProvider),web4bch.bch.defaultAccount?(document.getElementById("badger-open").innerHTML="<span>Opening Badger Wallet</span>",web4bch.bch.sendTransaction({to:a,from:web4bch.bch.defaultAccount,value:b},function(a,b){a?document.getElementById("badger-open").innerHTML="<span>Send With Badger Wallet</span>":(stopListenForTX(),stopListenForTX(),txDialogue({txid:b,successMsg:d,paywallField:c,successCallback:e}))})):
(document.getElementById("badger-open").innerHTML="<span>Please Unlock Badger Wallet</span>",alert("Please unlock Badger Wallet before continuing."))):(document.getElementById("badger-open").innerHTML="<span>Badger Wallet Not Found</span>",window.open("https://badger.bitcoin.com"),alert("To use Badger Wallet for this transaction, Please visit:\n\nhttps://badger.bitcoin.com for installation instructions."))}
function openModal(a){a.anyAmount?(a.amountMessage="Send any amount of Bitcoin Cash",a.URI=a.toAddress):(a.URI=a.toAddress+"?amount="+a.bchAmount,startListenForTX(a));var b={ecclevel:"Q",fillcolor:"#FFFFFF",textcolor:"#000000",margin:"0.5",modulesize:12};document.implementation.hasFeature("http://www.w3.org/2000/svg","1.1")?(genQR=QRCode.generateSVG(a.URI,b),genQR=(new XMLSerializer).serializeToString(genQR),genQR="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(genQR)))):genQR=
QRCode.generatePNG(a.URI,b);qrImage=genQR;(new Modal({content:'<div><div><div><div class="qrparent" onclick=copyBCHURI(\''+a.URI+'\')><img class="qrcode" src="'+qrImage+'" /><img class="qricon" src="https://paybutton.cash/images/bitcoincash_bare_logo.png" /><div id="copyDiv" class="qrctc">Click to Copy</div></div></div><div class="dialoguediv"><div><span>'+a.amountMessage+'</span></div> </div><div><div><button id="bch-open" class="pay-button modal" onclick="location.href=\''+a.URI+'\'" type="button"><span>Send with BCH Wallet</span></button></div></div><div class="poweredbydiv"><div><span><a href="https://paybutton.cash" target="_blank" style="color: orangeRed; text-decoration: none;">Powered by PayButton.cash</a></span></div></div></div></div>'})).open()}
function getBCHPrice(a){var b=new XMLHttpRequest;b.open("GET","https://index-api.bitcoin.com/api/v0/cash/price/"+a.amountType,!0);b.onload=function(){if(4==b.readyState&&200==b.status){var d=JSON.parse(b.responseText);""!=d.price?(a.satAmount=(1/(d.price/100)*a.buttonAmount).toFixed(8),a.randSat=getRandomSat(),a.bchAmount=(Number(a.satAmount)+Number(a.randSat)).toFixed(8),a.amountMessage=a.buttonAmount+" "+a.amountType+" = "+a.bchAmount+" BCH",openModal(a)):console.log("Error Price Not Found")}else console.log("Found Server But There Is An Error")};
b.onerror=function(){console.log("Could Not Connect To Server")};b.send()}
function mouseEnter(){var a=this.getAttribute("button-text-2")||"";a=a.trim();if(!a){var b=this.getAttribute("amount")||"";b=Number(b.trim());var d=this.getAttribute("amount-type")||"";d=d.trim().toUpperCase();a=b+" "+d;b&&d||(a="Click to send BCH")}this.innerHTML="<span>&nbsp</span>";var c=this;setTimeout(function(){c.innerHTML="<span>"+a+"</span>"},200);"ontouchend"in window||this.addEventListener("mouseleave",buttonDefaultText,!1);"ontouchend"in window&&this.addEventListener("touchend",buttonDefaultText,
!1)}function buttonDefaultText(){var a=this.getAttribute("button-text")||"";a=a.trim();if(!a){var b=this.getAttribute("amount")||"";b=Number(b.trim());var d=this.getAttribute("amount-type")||"";d=d.trim().toUpperCase();a="Send Bitcoin Cash";b&&d||(a="Send Bitcoin Cash")}this.innerHTML="<span>&nbsp</span>";var c=this;setTimeout(function(){c.innerHTML="<span>"+a+"</span>"},200)}
document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByClassName("pay-button"),b=0;b<a.length;b++){var d=a[b];window.addEventListener("load",buttonDefaultText.bind(d),!1);"ontouchstart"in window||d.addEventListener("mouseenter",mouseEnter,!1);"ontouchstart"in window&&d.addEventListener("touchstart",mouseEnter,!1);d.addEventListener("click",function(a){var b=this.getAttribute("amount")||"";b=Number(b.trim());a=this.getAttribute("amount-type")||"";a=a.trim().toUpperCase();
var d=this.getAttribute("address")||"";d=d.trim();var c=this.getAttribute("success-msg")||"";c=c.trim();var f=this.getAttribute("paywall-field")||"";f=f.trim();var g=this.getAttribute("success-callback")||"";g=g.trim();c={buttonAmount:b,amountType:a,toAddress:d,successMsg:c,paywallField:f,successCallback:g};if(d){if(b||a){if(!b||!a){alert('PayButton Error:\n\nFor specific PayButton amounts, BOTH of the following MUST be set:\n\n1. amount (Must be a number)\n2. amount-type (Can be BCH, Satoshi, USD, AUD etc)\n\nTo allow "Any" amount, BOTH must be blank.');
return}}else c.anyAmount=!0;c.anyAmount?openModal(c):"BCH"==a||"SATOSHI"==a?("SATOSHI"==a&&(b/=1E8),c.satAmount=b.toFixed(8),c.randSat=getRandomSat(),a=Number(c.satAmount)+Number(c.randSat),c.bchAmount=a.toFixed(8),c.amountMessage="Amount = "+c.bchAmount+" BCH",openModal(c)):getBCHPrice(c)}else alert("PayButton Error:\n\nBelow are the minimum button requirements\n\n1. address (Bitcoin Cash address)")})}});var qrId="pbQR";
if(!document.getElementById(qrId)){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.src="https://paybutton.cash/pre-release/v0.1/js/qrjs2.min.js";script.id=qrId;head.appendChild(script)}var cssButtonId="pbButtonCSS";
if(!document.getElementById(cssButtonId)){head=document.getElementsByTagName("head")[0];var link=document.createElement("link");link.rel="stylesheet";link.type="text/css";link.href="https://paybutton.cash/pre-release/v0.1/css/buttons.min.css";link.id=cssButtonId;link.media="all";head.appendChild(link)}var cssModalId="pbModalCSS";
document.getElementById(cssModalId)||(head=document.getElementsByTagName("head")[0],link=document.createElement("link"),link.rel="stylesheet",link.type="text/css",link.href="https://paybutton.cash/pre-release/v0.1/css/modal.min.css",link.id=cssModalId,link.media="all",head.appendChild(link));
